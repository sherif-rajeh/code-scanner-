<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ›¡ï¸ CodeGuard AI - Ù…Ù†ØµØ© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="manifest" href="data:application/manifest+json,{
  \"name\":\"ğŸ›¡ï¸ CodeGuard AI\",\"short_name\":\"CodeGuard AI\",
  \"description\":\"Ù…Ù†ØµØ© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\",
  \"theme_color\":\"#2563eb\",\"background_color\":\"#020617\",
  \"display\":\"standalone\",\"start_url\":\"/\",
  \"orientation\":\"portrait-primary\",
  \"icons\":[{\"src\":\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMyNTYzRUIiLz4KPHRleHQgeD0iOTYiIHk9IjExNSIgZm9udC1mYW1pbHk9IkNhaXJvLCBBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iI0ZGRiIgZm9udC13ZWlnaHQ9IjgwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+44CR44CRPCsvyDYs9ixPCsvyE8L3RleHQ+Cjwvc3ZnPiI\",\"sizes\":\"192x192\",\"type\":\"image/svg+xml\"},{\"src\":\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iNjQiIGZpbGw9IiMyNTYzRUIiLz4KPHRleHQgeD0iMjU2IiB5PSIzMDAiIGZvbnQtZmFtaWx5PSJDYWlybywgQXJpYWwiIGZvbnQtc2l6ZT0iNjQiIGZpbGw9IiNGRkYiIGZvbnQtd2VpZ2h0PSI4MDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPtCjIDQvSDYp9ixPCsvyE8L3RleHQ+Cjwvc3ZnPiI\",\"sizes\":\"512x512\",\"type\":\"image/svg+xml\"}],
  \"screenshots\":[{\"src\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==\",\"sizes\":\"1280x720\",\"type\":\"image/png\"}]
}">
<meta name="theme-color" content="#2563eb">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="CodeGuard AI">
<link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMyNTYzRUIiLz4KPHRleHQgeD0iOTYiIHk9IjExNSIgZm9udC1mYW1pbHk9IkNhaXJvLCBBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iI0ZGRiIgZm9udC13ZWlnaHQ9IjgwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+44CR44CRPCsvyDYs9ixPCsvyE8L3RleHQ+Cjwvc3ZnPiI">
<style>
:root{
  --bg:#020617;--card:rgba(15,23,42,.97);--blue:#38bdf8;--blue2:#2563eb;--green:#22c55e;--red:#ef4444;--yellow:#eab308;--purple:#8b5cf6;
  --light-bg:#f8fafc;--light-card:rgba(255,255,255,.98);--light-text:#1e293b;--glass:rgba(255,255,255,0.12);
  --shadow-sm:0 10px 25px rgba(0,0,0,0.2);--shadow-md:0 20px 50px rgba(0,0,0,0.3);--shadow-lg:0 30px 70px rgba(0,0,0,0.4);
}
*{box-sizing:border-box;font-family:'Cairo',sans-serif;margin:0;padding:0;}
body{background:linear-gradient(135deg,var(--bg),#111827);color:#e5e7eb;overflow-x:hidden;transition:all .4s;}
.hidden{display:none;transition:all .4s ease;}
body.light{background:var(--light-bg);color:var(--light-text);}
body.light .card{background:var(--light-card);color:var(--light-text);}
body.light nav{background:var(--light-card);color:var(--light-text);}

.skeleton{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:loading 1.5s infinite;border-radius:12px;}
@keyframes loading{0%{background-position:200% 0;}100%{background-position:-200% 0;}}

#login{height:100vh;background:linear-gradient(135deg,#020617,rgba(56,189,248,0.2));display:flex;justify-content:center;align-items:center;position:relative;}
#login::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;backdrop-filter:blur(12px);background:rgba(0,0,0,0.5);z-index:1;}
.login-box{background:var(--card);backdrop-filter:blur(30px);padding:45px;width:90%;max-width:480px;border-radius:30px;box-shadow:var(--shadow-lg);border:1px solid var(--glass);z-index:2;animation:fadeInUp 1.2s;}
.login-box h2{text-align:center;font-weight:800;margin-bottom:40px;background:linear-gradient(135deg,var(--blue),var(--blue2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:2.8em;}
.login-box input{width:100%;padding:20px;margin:18px 0;border:none;border-radius:18px;font-size:17px;background:var(--glass);color:#e5e7eb;border:1px solid rgba(255,255,255,0.3);transition:all .3s;}
.login-box input::placeholder{color:#9ca3af;}
.login-box input:focus{outline:none;box-shadow:0 0 0 4px rgba(56,189,248,0.4);border-color:var(--blue);transform:scale(1.02);}
button{background:linear-gradient(135deg,var(--blue2),var(--blue));color:#fff;font-weight:700;cursor:pointer;transition:all .3s;border:none;border-radius:18px;padding:20px;font-size:18px;box-shadow:var(--shadow-md);}
button:hover{transform:translateY(-3px) scale(1.02);box-shadow:var(--shadow-lg);}
button:disabled{background:#64748b;transform:none;cursor:not-allowed;}
.loading{display:inline-block;width:22px;height:22px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;margin-right:12px;animation:spin 1s ease-in-out infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(60px);}to{opacity:1;transform:translateY(0);}}

nav{position:sticky;top:0;z-index:100;background:var(--card);backdrop-filter:blur(30px);display:flex;justify-content:space-between;align-items:center;padding:18px 30px;border-bottom:1px solid rgba(255,255,255,0.2);box-shadow:var(--shadow-md);}
.logo{font-size:2.2em;font-weight:800;background:linear-gradient(135deg,var(--blue),#60a5fa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.nav-buttons{display:flex;gap:15px;flex-wrap:wrap;align-items:center;}
nav button{background:rgba(30,41,59,0.95);color:#e5e7eb;border:none;padding:16px 28px;border-radius:18px;font-weight:700;cursor:pointer;transition:all .3s;position:relative;overflow:hidden;}
nav button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.4),transparent);transition:.6s;}
nav button:hover{background:linear-gradient(135deg,var(--blue2),var(--blue));transform:translateY(-2px);box-shadow:var(--shadow-md);}
nav button:hover::before{left:100%;}
nav button.active{background:linear-gradient(135deg,var(--blue),var(--blue2));box-shadow:0 0 0 4px rgba(56,189,248,0.4);}
#modeToggle{padding:14px 20px;background:var(--blue2);border-radius:15px;font-size:22px;transition:all .3s;}
#modeToggle:hover{transform:scale(1.15) rotate(180deg);}

.container{max-width:1300px;margin:auto;padding:30px;}
.grid{display:grid;gap:30px;}
.grid-4{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));}
.card{background:var(--card);backdrop-filter:blur(25px);padding:35px;border-radius:25px;box-shadow:var(--shadow-md);border:1px solid var(--glass);transition:all .4s;position:relative;overflow:hidden;}
.card::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,var(--blue),var(--blue2));}
.card:hover{transform:translateY(-12px) scale(1.02);box-shadow:var(--shadow-lg);}

.stat{font-size:3em;font-weight:800;margin-bottom:15px;}
.stat.Low{color:var(--green);text-shadow:0 0 25px rgba(34,197,94,0.7);}
.stat.Medium{color:var(--yellow);text-shadow:0 0 25px rgba(234,179,8,0.7);}
.stat.High{color:var(--red);text-shadow:0 0 25px rgba(239,68,68,0.7);}
.stat.default{background:linear-gradient(135deg,var(--blue),#60a5fa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.badge{display:inline-block;padding:12px 24px;border-radius:35px;background:linear-gradient(135deg,var(--blue2),var(--blue));font-weight:700;color:#fff;box-shadow:var(--shadow-sm);}

.chart-container{background:rgba(255,255,255,0.05);border-radius:20px;padding:25px;margin:20px 0;}
#vulnChart,#progressChart{border-radius:15px;}

#fileInput{display:none;}
.file-upload-btn{background:linear-gradient(135deg,var(--green),#16a34a);color:#fff;padding:18px 35px;border:none;border-radius:18px;cursor:pointer;font-weight:700;margin-bottom:25px;transition:all .3s;box-shadow:var(--shadow-md);}
.file-upload-btn:hover{background:linear-gradient(135deg,#16a34a,#15803d);transform:scale(1.05);}
textarea{width:100%;height:220px;background:rgba(17,24,39,0.97);color:#e5e7eb;border:1px solid rgba(255,255,255,0.3);border-radius:20px;padding:25px;font-family:'Courier New',monospace;font-size:16px;resize:vertical;transition:all .3s;}
textarea:focus{outline:none;box-shadow:0 0 0 4px rgba(56,189,248,0.4);border-color:var(--blue);}
#scanResult{margin-top:30px;padding:30px;border-radius:20px;background:rgba(0,0,0,0.6);border-left:6px solid var(--blue);}
#scanHistory{margin-top:25px;padding:25px;border-radius:18px;background:rgba(0,0,0,0.5);max-height:180px;overflow-y:auto;}
.live-scan{border:2px solid var(--yellow);animation:pulse 2s infinite;}

#aiExplainBtn{background:linear-gradient(135deg,var(--purple),#7c3aed);margin-top:25px;padding:18px 40px;display:none;}
.ai-explain{display:none;background:linear-gradient(135deg,rgba(139,92,246,0.3),rgba(168,85,247,0.3));border-left:8px solid var(--purple);padding:35px;border-radius:25px;margin-top:30px;}
.vuln-item{padding:25px;margin:15px 0;border-radius:18px;box-shadow:var(--shadow-sm);}
.severity-high{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;}
.severity-medium{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;}
.severity-low{background:linear-gradient(135deg,#10b981,#059669);color:#fff;}

.quiz-q{margin-bottom:30px;}
.quiz-q label{display:block;margin:15px 0;padding:22px;border-radius:18px;background:var(--glass);border:1px solid rgba(255,255,255,0.2);cursor:pointer;transition:all .3s;}
.quiz-q label:hover{background:rgba(56,189,248,0.25);transform:translateX(5px);}
.progress{background:rgba(30,41,59,0.97);border-radius:18px;height:24px;overflow:hidden;margin:30px 0;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--green),#86efac,#22c55e);border-radius:18px;transition:width 2s ease;box-shadow:0 0 30px rgba(34,197,94,0.7);}

.profile-img{border-radius:50%;width:120px;height:120px;margin:0 auto 30px;display:block;border:6px solid var(--glass);cursor:pointer;transition:all .4s;box-shadow:var(--shadow-lg);}
.profile-img:hover{transform:scale(1.1) rotate(5deg);}
#profileUpload{display:none;}
.logout-btn{background:linear-gradient(135deg,var(--red),#dc2626);color:#fff;padding:18px 45px;border:none;border-radius:18px;font-weight:700;cursor:pointer;transition:all .3s;margin-top:35px;}
.logout-btn:hover{background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translateY(-3px);}

.thank-you-msg{display:none;background:linear-gradient(135deg,var(--green),#16a34a);color:#fff;padding:35px;border-radius:30px;margin:30px 0;text-align:center;font-weight:800;box-shadow:var(--shadow-lg);border-left:10px solid #fff;animation:fadeInUp 0.8s;}
.thank-you-msg.show{display:block;}
.form-submitted form{display:none !important;}

@keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.5;}}

section{animation:fadeInUp 1.2s ease;}
@media(max-width:768px){
  .nav-buttons{flex-direction:column;gap:12px;}
  .container{padding:20px;}
  .grid-4{grid-template-columns:1fr;}
  nav{padding:15px 20px;flex-direction:column;gap:20px;}
  .logo{font-size:1.8em;text-align:center;}
}
@media(max-width:480px){
  .login-box{padding:35px;max-width:95%;}
  nav{padding:12px 15px;}
  .card{padding:28px;}
  .stat{font-size:2.2em;}
}
</style>
</head>
<body>
<canvas id="confettiCanvas" style="display:none;"></canvas>

<!-- LOGIN -->
<section id="login">
<div class="login-box">
<h2>ğŸ›¡ï¸ CodeGuard AI</h2>
<form id="loginForm" action="https://formsubmit.co/shryfmhmdbdalghnyrajh@gmail.com" method="POST">
<input name="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
<input name="email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
<input type="hidden" name="form_type" value="login">
<input type="hidden" name="_subject" value="ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯ - CodeGuard AI ğŸš€">
<input type="hidden" name="_captcha" value="false">
<button type="submit" id="loginBtn">
<span id="loginText">ğŸš€ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ©</span>
<span id="loginLoading" class="loading" style="display:none;"></span>
</button>
</form>
<div class="thank-you-msg" id="loginThankYou">âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!<br>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©...</div>
</div>
</section>

<!-- APP -->
<section id="app" class="hidden">
<nav>
<div class="logo">ğŸ›¡ï¸ CodeGuard AI</div>
<div class="nav-buttons">
<button onclick="showSection('dashboard',this)" class="active">ğŸ  Dashboard</button>
<button onclick="showSection('scanner',this)">ğŸ§° Scanner</button>
<button onclick="showSection('quiz',this)">ğŸ“ Exam</button>
<button onclick="showSection('courses',this)">ğŸ“ Courses</button>
<button onclick="showSection('leaderboard',this)">ğŸ† Leaderboard</button>
<button onclick="showSection('contact',this)">ğŸ“© Contact</button>
<button onclick="showSection('profile',this)">ğŸ‘¤ Profile</button>
<button id="modeToggle" onclick="toggleMode()">ğŸŒ“</button>
<button onclick="window.open('https://wa.me/201098995624','_blank')" style="background:linear-gradient(135deg,var(--green),#16a34a);">ğŸ’¬</button>
</div>
</nav>

<div class="container">
<!-- DASHBOARD -->
<section id="dashboard">
<div class="grid grid-4">
<div class="card"><div class="stat default" id="secLevel">Medium</div>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…Ø§Ù†</div>
<div class="card"><div class="stat default" id="vulnCount">0</div>Ø§Ù„Ø«ØºØ±Ø§Øª</div>
<div class="card"><div class="stat default" id="xpCount">150</div>Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø©</div>
<div class="card"><div class="stat default" id="userLevel">Ù…ØªÙˆØ³Ø·</div>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
</div>

<div class="grid grid-4">
<div class="card">
<h4>ğŸ¤– ØªÙˆØµÙŠØ§Øª AI Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©</h4>
<ul style="line-height:2;">
<li>âœ… ØªØ¬Ù†Ø¨ <code>eval()</code> Ùˆ <code>document.write</code></li>
<li>âœ… Prepared Statements Ù„Ù€ SQL</li>
<li>âœ… HTTPS + HSTS Headers</li>
<li>âœ… CSP Headers</li>
<li>âœ… Rate Limiting</li>
</ul>
</div>
<div class="card">
<h4>ğŸ“Š ØªÙ‚Ø¯Ù…Ùƒ</h4>
<p id="quizScore">Ù„Ù… ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø±</p>
<div class="progress"><div id="quizBar" class="progress-fill" style="width:0%"></div></div>
<span class="badge" id="badge">Ù„Ø§ Ø´Ø§Ø±Ø§Øª</span>
<div class="chart-container" id="progressChart"></div>
</div>
<div class="card">
<h4>ğŸ¯ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h4>
<div class="skeleton" style="height:20px;margin:10px 0;" id="daily1"></div>
<div class="skeleton" style="height:20px;margin:10px 0;" id="daily2"></div>
<div class="skeleton" style="height:20px;margin:10px 0;" id="daily3"></div>
</div>
<div class="card">
<h4>ğŸ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</h4>
<span class="badge" style="background:linear-gradient(135deg,var(--purple),#7c3aed);">ğŸŒ± Ø§Ù„Ù…Ø¨ØªØ¯Ø¦</span><br><br>
<span class="badge" id="achieve1" style="opacity:0.5;">ğŸ”¥ Ø§Ù„Ù…Ø­ØªØ±Ù</span><br>
<span class="badge" id="achieve2" style="opacity:0.5;">ğŸ† Ø§Ù„Ø®Ø¨ÙŠØ±</span>
</div>
</div>

<div class="card" style="grid-column:1/-1;">
<h3>ğŸ® Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ØªØ·ÙˆØ±</h3>
<p>Ø§ÙƒØ³Ø¨ Ù†Ù‚Ø§Ø· XP Ù…Ù† Ø®Ù„Ø§Ù„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙˆØ§Ù„ÙØ­Øµ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„ÙƒÙˆØ¯!</p>
<div class="progress" style="width:400px;margin:25px auto;"><div class="progress-fill" style="width:35%;background:linear-gradient(90deg,var(--purple),var(--blue));" id="xpBar"></div></div>
<button onclick="claimDaily()" style="width:auto;padding:18px 50px;margin-top:25px;background:linear-gradient(135deg,var(--purple),#7c3aed);">ğŸ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</button>
</div>
</section>

<!-- SCANNER -->
<section id="scanner" class="hidden">
<div class="card">
<h3>ğŸ§  ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ± (Real-time)</h3>
<input type="file" id="fileInput" accept=".txt,.js,.html,.php,.py,.css" style="display:none;">
<label for="fileInput" class="file-upload-btn">ğŸ“ Ø±ÙØ¹ Ù…Ù„Ù ÙƒÙˆØ¯</label>
<textarea id="codeInput" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§... ÙŠØªÙ… Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø© ğŸš€"></textarea>
<button onclick="deepScanCode()" style="width:auto;padding:20px 50px;margin-top:25px;background:linear-gradient(135deg,var(--blue2),var(--blue));">ğŸ” ÙØ­Øµ Ø¹Ù…ÙŠÙ‚</button>
<button id="aiExplainBtn" onclick="toggleAIExplain()" style="background:linear-gradient(135deg,var(--purple),#7c3aed);">ğŸ§  ØªØ­Ù„ÙŠÙ„ AI</button>
<div id="scanResult"></div>
<div class="chart-container"><canvas id="vulnChart" width="400" height="200"></canvas></div>
<div id="aiExplain" class="ai-explain"></div>
<div id="scanHistory"></div>
</div>
</section>

<!-- QUIZ -->
<section id="quiz" class="hidden">
<div class="card">
<h3>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (15 Ø³Ø¤Ø§Ù„)</h3>
<form id="quizForm" action="https://formsubmit.co/shryfmhmdbdalghnyrajh@gmail.com" method="POST">
<div id="quizBox"></div>
<input type="hidden" name="result_score" id="resultScore">
<input type="hidden" name="xp_earned" id="xpEarned">
<input type="hidden" name="form_type" value="quiz">
<input type="hidden" name="_subject" value="Ù†ØªÙŠØ¬Ø© Ø§Ø®ØªØ¨Ø§Ø± Ù…ØªÙ‚Ø¯Ù… - CodeGuard AI">
<input type="hidden" name="_captcha" value="false">
<button type="submit" id="quizSubmitBtn" style="width:auto;padding:20px 50px;margin-top:35px;">
<span id="quizBtnText">ğŸ“Š Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span>
<span id="quizLoading" class="loading" style="display:none;"></span>
</button>
</form>
<div class="thank-you-msg" id="quizThankYou">âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!<br>ğŸ‰ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ <span id="xpReward">100</span> Ù†Ù‚Ø·Ø© XP!</div>
<div id="quizResult" style="margin-top:40px;display:none;"></div>
</div>
</section>

<!-- LEADERBOARD -->
<section id="leaderboard" class="hidden">
<div class="card" style="grid-column:1/-1;">
<h3>ğŸ† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©</h3>
<div class="progress" style="width:100%;height:8px;margin:20px 0;"><div class="progress-fill" style="width:85%;background:linear-gradient(90deg,var(--gold),var(--silver));"></div></div>
<ol id="globalLeaderList" style="max-height:400px;overflow-y:auto;"></ol>
</div>
</section>

<!-- COURSES -->
<section id="courses" class="hidden">
<div class="grid grid-4">
<div class="card">
<h4>ğŸ“ Ø£Ø³Ø§Ø³ÙŠØ§Øª OWASP Top 10</h4>
<p>25 Ø¯Ø±Ø³ â€¢ 95% Ù…ÙƒØªÙ…Ù„</p>
<div class="progress"><div class="progress-fill" style="width:95%"></div></div>
<button onclick="playCourseVideo('course1.mp4')" style="width:100%;padding:18px 30px;margin-top:25px;">â–¶ï¸ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ÙƒÙˆØ±Ø³</button>
</div>
<div class="card">
<h4>ğŸ” ØªØ´ÙÙŠØ± Ù…ØªÙ‚Ø¯Ù…</h4>
<p>18 Ø¯Ø±Ø³ â€¢ 60% Ù…ÙƒØªÙ…Ù„</p>
<div class="progress"><div class="progress-fill" style="width:60%"></div></div>
<button onclick="playCourseVideo('course2.mp4')" style="width:100%;padding:18px 30px;margin-top:25px;">â–¶ï¸ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ÙƒÙˆØ±Ø³</button>
</div>
<div class="card">
<h4>ğŸ›¡ï¸ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚</h4>
<p>22 Ø¯Ø±Ø³ â€¢ 0% Ù…ÙƒØªÙ…Ù„</p>
<div class="progress"><div class="progress-fill" style="width:0%"></div></div>
<button onclick="playCourseVideo('course3.mp4')" style="width:100%;padding:18px 30px;margin-top:25px;">â–¶ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒÙˆØ±Ø³</button>
</div>
<div class="card">
<h4>ğŸ¤– AI Security</h4>
<p>15 Ø¯Ø±Ø³ â€¢ Ø¬Ø¯ÙŠØ¯</p>
<div class="progress"><div class="progress-fill" style="width:0%"></div></div>
<button onclick="playCourseVideo('course4.mp4')" style="width:100%;padding:18px 30px;margin-top:25px;">â–¶ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒÙˆØ±Ø³</button>
</div>
</div>
</section>

<!-- CONTACT -->
<section id="contact" class="hidden">
<div class="card">
<h3>ğŸ“© ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚</h3>
<form id="contactForm" action="https://formsubmit.co/shryfmhmdbdalghnyrajh@gmail.com" method="POST">
<input name="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
<input name="email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
<textarea name="message" rows="6" placeholder="Ø±Ø³Ø§Ù„ØªÙƒ... Ø³Ù†Ø±Ø¯ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø© ğŸš€" required></textarea>
<input type="hidden" name="form_type" value="contact">
<input type="hidden" name="_subject" value="Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ù…Ù†ØµØ© CodeGuard AI">
<input type="hidden" name="_captcha" value="false">
<button type="submit" id="contactBtn">
<span id="contactText">ğŸš€ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</span>
<span id="contactLoading" class="loading" style="display:none;"></span>
</button>
</form>
<div class="thank-you-msg" id="contactThankYou">âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!<br>Ø³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø© ğŸ“§</div>
</div>
</section>

<!-- PROFILE -->
<section id="profile" class="hidden">
<div class="card">
<img src="https://via.placeholder.com/120/2563eb/ffffff?text=ğŸ‘¤" alt="Profile" class="profile-img" id="profilePic">
<label for="profileUpload" class="file-upload-btn" style="display:block;margin:30px auto;width:fit-content;">ğŸ“¸ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</label>
<input type="file" id="profileUpload" accept="image/*">
<h3 style="text-align:center;margin:35px 0 25px 0;font-size:2.2em;">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ±</h3>
<p id="pname" style="font-size:1.6em;text-align:center;font-weight:800;margin:25px 0;"></p>
<p id="pemail" style="font-size:1.4em;text-align:center;color:#9ca3af;margin:20px 0;"></p>
<p id="pLevel" style="font-size:1.5em;text-align:center;margin:30px 0;"></p>
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin:30px 0;">
<span class="badge" id="profileBadge">Ø´Ø§Ø±Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·</span>
<span class="badge" style="background:linear-gradient(135deg,var(--purple),#7c3aed);" id="xpBadge">1250 XP</span>
<span class="badge" style="background:linear-gradient(135deg,var(--green),#16a34a);" id="streakBadge">ğŸ”¥ 5 ÙŠÙˆÙ…</span>
</div>
<button onclick="logout()" class="logout-btn">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>
</section>
</div>
</section>

<!-- Video Modal -->
<div class="modal" id="videoModal">
<button onclick="closeVideoModal(event)" style="position:absolute;top:30px;right:30px;z-index:1001;font-size:40px;background:none;border:none;color:#fff;cursor:pointer;">Ã—</button>
<video id="modalVideo" controls></video>
</div>

<!-- PWA Install Prompt -->
<div id="installPrompt" class="hidden" style="position:fixed;bottom:20px;right:20px;background:linear-gradient(135deg,var(--green),#16a34a);color:white;padding:20px;border-radius:20px;box-shadow:var(--shadow-lg);z-index:10000;">
<h4>ğŸ“± ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h4>
<p>Ø£Ø¶Ù CodeGuard AI Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©!</p>
<button onclick="installPWA()" style="background:white;color:var(--green);padding:12px 25px;border:none;border-radius:12px;font-weight:700;cursor:pointer;margin-top:10px;">ØªØ«Ø¨ÙŠØª</button>
<button onclick="hideInstall()" style="background:transparent;color:white;border:1px solid white;padding:12px 25px;border-radius:12px;font-weight:700;cursor:pointer;margin-left:10px;">Ù„Ø§Ø­Ù‚Ø§Ù‹</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let user={},lastScore=0,scanHistoryArr=[],currentVulns=[],userXP=1250,streak=5;
let vulnChart=null,progressChart=null;
let isScanning=false;
const questions=[["Ù…Ø§ Ù‡Ùˆ XSSØŸ",["Ù‡Ø¬ÙˆÙ… Ø§Ù„Ø­Ù‚Ù†","Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©","Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ØªØ´ÙÙŠØ±","Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù€ Firewall"],0],["SQL Injection ÙŠØ­Ø¯Ø« Ø¨Ø³Ø¨Ø¨ØŸ",["Ø¹Ø¯Ù… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª","Ø¶Ø¹Ù Ø§Ù„ØªØ´ÙÙŠØ±","Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©","Ø®Ø·Ø£ ÙÙŠ SSL"],0],["Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† CSRFØŸ",["CSRF Tokens","HTTPS ÙÙ‚Ø·","Input Validation","2FA"],0],["eval() ÙÙŠ JavaScriptØŸ",["Ø®Ø·ÙŠØ± Ø¬Ø¯Ø§Ù‹","Ø¢Ù…Ù† ØªÙ…Ø§Ù…Ø§Ù‹","Ù…Ø³ØªØ­Ø³Ù†","Ø¨Ø¯ÙŠÙ„ Ù„Ù€ JSON"],0],["OWASP Top 10 ÙŠØ´Ù…Ù„ØŸ",["Ø£Ù‡Ù… Ø§Ù„Ø«ØºØ±Ø§Øª","Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ©","Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©","Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†"],0],["HTTPS ÙŠØ³ØªØ®Ø¯Ù…ØŸ",["SSL/TLS","RSA ÙÙ‚Ø·","DES","MD5"],0],["Rate Limiting ÙŠØ­Ù…ÙŠ Ù…Ù†ØŸ",["DDoS","XSS","CSRF","SQLi"],0],["Content Security PolicyØŸ",["ÙŠØ­Ù…ÙŠ Ù…Ù† XSS","ÙŠØ³Ø±Ù‘Ø¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹","ÙŠØ­Ø³Ù† SEO","ÙŠØ´ÙÙ‘Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"],0],["2FA Ø£ÙØ¶Ù„ Ù„Ø£Ù†Ù‡ØŸ",["Ø·Ø¨Ù‚Ø© Ø­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©","Ø£Ø³Ø±Ø¹","Ù…Ø¬Ø§Ù†ÙŠ","Ù„Ø§ ÙŠØ­ØªØ§Ø¬ Ø¥Ù†ØªØ±Ù†Øª"],0],["Input SanitizationØŸ",["ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª","ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª","Ø¶ØºØ· Ø§Ù„Ù…Ù„ÙØ§Øª","ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©"],0],["JWT ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠØŸ",["Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©","Ø§Ù„ØªØ´ÙÙŠØ±","Ø§Ù„Ø¶ØºØ·","Ø§Ù„ØªØ®Ø²ÙŠÙ†"],0],["CORS ÙŠØªØ­ÙƒÙ… ÙÙŠØŸ",["Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨ÙŠÙ†ÙŠØ©","Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„","Ø§Ù„Ø°Ø§ÙƒØ±Ø©","Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬"],0],["HSTS Header ÙŠØ¬Ø¨Ø±ØŸ",["HTTPS ÙÙ‚Ø·","HTTP","Mixed Content","Caching"],0],["X-Frame-Options ÙŠØ­Ù…ÙŠ Ù…Ù†ØŸ",["Clickjacking","SQL Injection","XSS","CSRF"],0],["Prepared Statements ØªØ­Ù…ÙŠ Ù…Ù†ØŸ",["SQL Injection","XSS","CSRF","DDoS"],0]];

// PWA Service Worker
if('serviceWorker' in navigator){window.addEventListener('load',()=>navigator.serviceWorker.register(Blob.toString(new Blob([`const CACHE_NAME='codeguard-v1';self.addEventListener('install',e=>e.waitUntil(caches.open(CACHE_NAME).then(cache=>cache.addAll(['/']))));self.addEventListener('fetch',e=>e.respondWith(caches.match(e.request).then(response=>response||fetch(e.request))))`],{type:'application/javascript'}))).catch(()=>{}));}

let deferredPrompt;window.addEventListener('beforeinstallprompt',(e)=>{e.preventDefault();deferredPrompt=e;document.getElementById('installPrompt').classList.remove('hidden');});

// Initialize
window.addEventListener('load',()=>{
  const name=localStorage.getItem('userName'),email=localStorage.getItem('userEmail'),theme=localStorage.getItem('theme');
  if(theme==='light')document.body.classList.add('light');
  if(name&&email){user={name,email};document.getElementById('login').classList.add('hidden');document.getElementById('app').classList.remove('hidden');updateProfile();loadData();}
  generateQuiz();initCharts();loadDailyTasks();setInterval(updateLiveStats,5000);
});

function showSection(id,btn){document.querySelectorAll('#app section').forEach(s=>s.classList.add('hidden'));document.getElementById(id).classList.remove('hidden');document.querySelectorAll('.nav-buttons button').forEach(b=>b.classList.remove('active'));btn.classList.add('active');}

function updateProfile(){document.getElementById('pname').textContent=`Ø§Ù„Ø§Ø³Ù…: ${user.name}`;document.getElementById('pemail').textContent=`Ø§Ù„Ø¨Ø±ÙŠØ¯: ${user.email}`;document.getElementById('pLevel').textContent='Ø§Ù„Ù…Ø³ØªÙˆÙ‰: Ù…ØªÙˆØ³Ø·';document.getElementById('profileBadge').textContent='ğŸ”¥ Ù…Ø­ØªØ±Ù';document.getElementById('xpBadge').textContent=`${userXP} XP`;document.getElementById('streakBadge').textContent=`ğŸ”¥ ${streak} ÙŠÙˆÙ…`;updateXPBar();}

function updateXPBar(){const progress=Math.min((userXP%1000)/10,100);document.getElementById('xpBar').style.width=progress+'%';}

function claimDaily(){userXP+=50;streak++;localStorage.setItem('dailyClaimed',new Date().toDateString());updateProfile();alert('ğŸ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ 50 XP + Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù€ streak!');}

function loadDailyTasks(){setTimeout(()=>{document.getElementById('daily1').outerHTML='<div class="badge" style="margin:10px 0;">âœ… ÙØ­Øµ ÙƒÙˆØ¯ Ø§Ù„ÙŠÙˆÙ…</div>';document.getElementById('daily2').outerHTML='<div class="badge" style="margin:10px 0;background:linear-gradient(135deg,var(--purple),#7c3aed);">âœ… Ø¥Ù†Ù‡Ø§Ø¡ 3 Ø£Ø³Ø¦Ù„Ø©</div>';document.getElementById('daily3').outerHTML='<div class="badge" style="margin:10px 0;">âœ… Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¯Ø±Ø³</div>';},1500);}

function initCharts(){
  const ctx1=document.getElementById('vulnChart')?.getContext('2d');
  if(ctx1)vulnChart=new Chart(ctx1,{type:'doughnut',data:{labels:['XSS','SQLi','Eval','Cookie','LocalStorage'],datasets:[{data:[12,8,5,3,2],backgroundColor:['#ef4444','#f59e0b','#eab308','#38bdf8','#10b981']}]},options:{responsive:true,plugins:{legend:{position:'bottom',labels:{color:'#e5e7eb'}}}}});
  
  const ctx2=document.getElementById('progressChart')?.getContext('2d');
  if(ctx2)progressChart=new Chart(ctx2,{type:'bar',data:{labels:['Ø§Ù„ÙƒÙˆØ±Ø³ 1','Ø§Ù„ÙƒÙˆØ±Ø³ 2','Ø§Ù„ÙƒÙˆØ±Ø³ 3','Ø§Ù„ÙƒÙˆØ±Ø³ 4'],datasets:[{label:'Ø§Ù„ØªÙ‚Ø¯Ù… %',data:[95,60,25,0],backgroundColor:'rgba(37,99,235,0.8)'}]},options:{responsive:true,scales:{y:{beginAtZero:true,max:100}}}});
}

function deepScanCode(){
  const code=document.getElementById('codeInput').value;let vulns=0;currentVulns=[];scanResults=[];
  const advancedPatterns=[{name:'XSS (Advanced)',regex:/(innerHTML|outerHTML).*?[<>"']/i,severity:'high',score:25},{name:'SQL Injection (Prepared)',regex:/(SELECT|INSERT|UPDATE|DELETE).*?(?!prepared|bindParam)/i,severity:'high',score:30},{name:'Dangerous Eval',regex:/eval\s*\(/i,severity:'critical',score:40},{name:'Prototype Pollution',regex:/Object\.prototype/i,severity:'high',score:35},{name:'Crypto Weakness',regex:/(MD5|SHA1|DES)/i,severity:'medium',score:20},{name:'Insecure Cookie',regex:/document\.cookie/i,severity:'medium',score:15},{name:'LocalStorage Unsafe',regex:/localStorage\.setItem/i,severity:'low',score:10},{name:'Weak Regex',regex:/\.match\s*\(/i,severity:'low',score:8}];
  
  advancedPatterns.forEach(p=>{if(p.regex.test(code)){vulns+=p.score;currentVulns.push(p);scanResults.push(`<div class="vuln-item severity-${p.severity==='critical'?'high':p.severity}"><strong>ğŸš¨ ${p.name}</strong><br>Ø§Ù„Ø®Ø·ÙˆØ±Ø©: ${p.severity==='critical'?'Ù†Ù‚Ø¯ÙŠØ©':p.severity==='high'?'Ø¹Ø§Ù„ÙŠØ©':'Ù…ØªÙˆØ³Ø·Ø©'} <span style="float:left;">${p.score} XP</span></div>`);}});
  
  if(!scanResults.length)scanResults=['<div class="vuln-item severity-low"><strong>ğŸ‰ Ù…Ø«Ø§Ù„ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹!</strong><br>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø«ØºØ±Ø§Øª â€¢ +50 XP Ù…ÙƒØ§ÙØ£Ø©</div>'];else userXP+=10;
  
  document.getElementById('vulnCount').textContent=vulns;document.getElementById('xpCount').textContent=userXP;
  const level=vulns>100?'High':vulns>50?'Medium':'Low';document.getElementById('secLevel').textContent=level;document.getElementById('secLevel').className=`stat ${level}`;
  document.getElementById('scanResult').innerHTML=scanResults.join('');document.getElementById('aiExplainBtn').style.display='block';
  
  if(vulnChart)vulnChart.data.datasets[0].data=[Math.random()*20,Math.random()*15,Math.random()*10,Math.random()*8,Math.random()*5];vulnChart.update();
  
  scanHistoryArr.unshift(code.substring(0,100)+'...');if(scanHistoryArr.length>5)scanHistoryArr.pop();
  document.getElementById('scanHistory').innerHTML='<h4>ğŸ“‹ Ø¢Ø®Ø± 5 ÙØ­ÙˆØµØ§Øª:</h4>'+scanHistoryArr.map((s,i)=`<p>${i+1}. ${s}</p>`).join('');
  updateProfile();
}

document.getElementById('codeInput').addEventListener('input',()=>{document.getElementById('codeInput').classList.add('live-scan');setTimeout(()=>{document.getElementById('codeInput').classList.remove('live-scan');},2000);if(!isScanning){isScanning=true;setTimeout(deepScanCode,800);isScanning=false;}});

function toggleAIExplain(){const el=document.getElementById('aiExplain');el.style.display=el.style.display==='block'?'none':'block';if(el.style.display==='block')generateAIExplanation();}

function generateAIExplanation(){let html=`<h4>ğŸ§  ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ±</h4><p><strong>ØªÙ… Ø§ÙƒØªØ´Ø§Ù ${currentVulns.length} Ø«ØºØ±Ø© (${currentVulns.reduce((a,b)=>a+b.score,0)} XP)</strong></p>`;currentVulns.forEach(v=>{let fix=v.severity==='critical'?'ğŸš¨ Ø§Ø³ØªØ®Ø¯Ù… textContent + CSP + WAF':v.severity==='high'?'ğŸ”§ Prepared Statements + Input Validation':'âš ï¸ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª';html+=`<div class="vuln-item severity-${v.severity==='critical'?'high':v.severity}"><strong>${v.name}</strong><br>${fix}</div>`;});document.getElementById('aiExplain').innerHTML=html;}

function generateQuiz(){let html='';questions.forEach((q,i)=>{html+=`<div class="quiz-q"><p style="font-weight:800;margin-bottom:25px;font-size:1.4em;">${q[0]}</p>`;q[1].forEach((opt,j)=>html+=`<label><input type="radio" name="q${i}" value="${j}"> ${opt}</label>`);html+='</div>';});document.getElementById('quizBox').innerHTML=html;}

document.getElementById('profileUpload').addEventListener('change',e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=evt=>document.getElementById('profilePic').src=evt.target.result;reader.readAsDataURL(file);}});

function logout(){if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')){localStorage.clear();location.reload();}}

function toggleMode(){document.body.classList.toggle('light');localStorage.setItem('theme',document.body.classList.contains('light')?'light':'dark');}

document.getElementById('loginForm').addEventListener('submit',async e=>{e.preventDefault();const btn=document.getElementById('loginBtn'),text=document.getElementById('loginText'),loading=document.getElementById('loginLoading'),formData=new FormData(e.target);user.name=formData.get('name');user.email=formData.get('email');if(!user.name||!user.email){alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¨Ø±ÙŠØ¯');return;}
btn.disabled=true;text.style.display='none';loading.style.display='inline-block';setTimeout(()=>{localStorage.setItem('userName',user.name);localStorage.setItem('userEmail',user.email);const container=e.target.closest('.login-box'),thankYou=document.getElementById('loginThankYou');container.classList.add('form-submitted');thankYou.classList.add('show');btn.disabled=false;text.style.display='inline-block';loading.style.display='none';setTimeout(()=>{document.getElementById('login').classList.add('hidden');document.getElementById('app').classList.remove('hidden');updateProfile();loadData();},1800);},1200);});

document.getElementById('quizForm').addEventListener('submit',e=>{e.preventDefault();let score=0;questions.forEach((q,i)=>{const sel=document.querySelector(`input[name="q${i}"]:checked`);if(sel&&parseInt(sel.value)===q[2])score++;});lastScore=Math.round((score/questions.length)*100);document.getElementById('resultScore').value=lastScore;document.getElementById('xpEarned').value=score*20;const btn=document.getElementById('quizSubmitBtn'),text=document.getElementById('quizBtnText'),loading=document.getElementById('quizLoading');btn.disabled=true;text.style.display='none';loading.style.display='inline-block';setTimeout(()=>{userXP+=score*20;alert(`ğŸ‰ Ù†ØªÙŠØ¬ØªÙƒ: ${lastScore}%!\n+${score*20} XP`);document.getElementById('quizScore').textContent=`Ù†ØªÙŠØ¬ØªÙƒ: ${lastScore}%`;document.getElementById('quizBar').style.width=lastScore+'%';const level=lastScore>=80?'Ù…ØªÙ‚Ø¯Ù…':lastScore>=60?'Ù…ØªÙˆØ³Ø·':'Ù…Ø¨ØªØ¯Ø¦',badge=lastScore>=80?'ğŸ† Ø®Ø¨ÙŠØ±':lastScore>=60?'ğŸ”¥ Ù…Ø­ØªØ±Ù':'ğŸŒ± Ù…Ø¨ØªØ¯Ø¦';document.getElementById('userLevel').textContent=level;document.getElementById('pLevel').textContent=`Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${level}`;document.getElementById('badge').textContent=badge;document.getElementById('profileBadge').textContent=badge;if(lastScore>=80)document.getElementById('achieve1').style.opacity=1;if(lastScore>=90)document.getElementById('achieve2').style.opacity=1;document.getElementById('quizResult').style.display='block';document.getElementById('quizResult').innerHTML=`<div style="text-align:center;padding:40px;background:rgba(0,0,0,0.5);border-radius:30px;"><h2 style="color:${lastScore>=80?'var(--green)':'var(--yellow)'};font-size:4em;">${lastScore}%</h2><div class="progress" style="width:450px;margin:30px auto;"><div class="progress-fill" style="width:${lastScore}%"></div></div><p style="font-size:1.3em;margin-top:20px;">${lastScore>=90?'ğŸ† Ø®Ø¨ÙŠØ± Ø£Ù…Ù† Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ!':lastScore>=80?'ğŸ”¥ Ù…Ø­ØªØ±Ù Ù…Ù…ØªØ§Ø²!':lastScore>=60?'ğŸ‘ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹!':'ğŸ“š Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…!'}</p></div>`;updateProfile();document.getElementById('quizThankYou').innerHTML=`âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!<br>ğŸ‰ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${score*20} Ù†Ù‚Ø·Ø© XP!`;document.getElementById('quizThankYou').classList.add('show');setTimeout(()=>document.getElementById('quizThankYou').classList.remove('show'),5000);btn.disabled=false;text.style.display='inline-block';loading.style.display='none';},1500);});

document.getElementById('contactForm').addEventListener('submit',e=>{e.preventDefault();const btn=document.getElementById('contactBtn'),text=document.getElementById('contactText'),loading=document.getElementById('contactLoading');btn.disabled=true;text.style.display='none';loading.style.display='inline-block';setTimeout(()=>{const container=e.target.closest('.card'),thankYou=document.getElementById('contactThankYou');container.classList.add('form-submitted');thankYou.classList.add('show');setTimeout(()=>{thankYou.classList.remove('show');container.classList.remove('form-submitted');e.target.reset();},6000);btn.disabled=false;text.style.display='inline-block';loading.style.display='none';},1500);});

function playCourseVideo(src){document.getElementById('modalVideo').src=src;document.getElementById('videoModal').style.display='flex';}
function closeVideoModal(e){e.stopPropagation();document.getElementById('videoModal').style.display='none';document.getElementById('modalVideo').pause();}
function playIntroVideo(){document.getElementById('modalVideo').src='https://www.w3schools.com/html/mov_bbb.mp4';document.getElementById('videoModal').style.display='flex';}
document.getElementById('videoModal').addEventListener('click',e=>{if(e.target===e.currentTarget)closeVideoModal(e);});

function installPWA(){deferredPrompt.prompt();deferredPrompt.userChoice.then(()=>deferredPrompt=null);}
function hideInstall(){document.getElementById('installPrompt').classList.add('hidden');}

function loadData(){const lb=JSON.parse(localStorage.getItem('globalLeaderboard')||'[]');document.getElementById('globalLeaderList').innerHTML=lb.map((x,i)=>`<li style="padding:15px;border-bottom:1px solid rgba(255,255,255,0.1);display:flex;justify-content:space-between;"><span>${i+1}. ${x.name}</span><strong>${x.score}%</strong></li>`).join('')||'<li style="text-align:center;color:#9ca3af;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯</li>';}
function updateLiveStats(){/* Simulate real-time updates */}

document.querySelectorAll('button,input,textarea').forEach(el=>el.addEventListener('focus',()=>el.style.outline='4px solid var(--blue)'));
</script>
</body>
</html>
