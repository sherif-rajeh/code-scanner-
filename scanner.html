<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scanner AI</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<meta name="theme-color" content="#2563eb">
<style>
:root{
  --blue:#2563eb; --blue-dark:#1e3a8a; --bg:#0f172a; --card:#1f2937; --text:#e5e7eb;
  --green:#22c55e; --yellow:#eab308; --red:#ef4444;
  --shadow-md:0 10px 30px rgba(0,0,0,0.3);
}
*{box-sizing:border-box;font-family:'Cairo',sans-serif;margin:0;padding:0;}
body{background:var(--bg);color:var(--text);overflow-x:hidden;transition:all .4s;}
nav{background:linear-gradient(135deg,var(--blue-dark),var(--blue));padding:15px 30px;display:flex;justify-content:space-between;align-items:center;box-shadow:var(--shadow-md);border-radius:0 0 15px 15px;}
nav .logo{font-size:2em;font-weight:700;color:#fff;}
nav button{color:#fff;border:none;padding:12px 25px;border-radius:12px;font-weight:600;cursor:pointer;transition:all .3s;margin-left:10px;}
nav button:hover{transform:translateY(-2px);}
nav button#logoutBtn{background:#ef4444;}
nav button#whatsappBtn{background:#25D366;}
.container{max-width:1200px;margin:auto;padding:30px;}
.grid{display:grid;gap:30px;}
.grid-2{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));}
.card{background:var(--card);padding:30px;border-radius:15px;box-shadow:var(--shadow-md);border:1px solid rgba(255,255,255,0.05);transition:transform .3s,box-shadow .3s;}
.card:hover{transform:translateY(-5px);box-shadow:0 15px 35px rgba(0,0,0,0.4);}
textarea{width:100%;height:250px;background:#111827;color:#e5e7eb;border:1px solid rgba(255,255,255,0.2);border-radius:12px;padding:20px;font-family:'Courier New',monospace;font-size:16px;}
textarea:focus{outline:none;box-shadow:0 0 0 3px var(--blue);}
.file-upload-btn{background:var(--blue);color:#fff;padding:15px 30px;border:none;border-radius:12px;cursor:pointer;font-weight:700;margin-bottom:20px;transition:all .3s;}
.file-upload-btn:hover{transform:scale(1.05);}
.vuln-item{padding:15px;margin:15px 0;border-radius:12px;color:#fff;font-weight:600;}
.severity-high{background:#dc2626;}
.severity-medium{background:#f59e0b;}
.severity-low{background:#10b981;}
.vuln-details{background:rgba(255,255,255,0.05);padding:12px;margin-top:10px;border-radius:10px;font-size:0.95em;color:#d1d5db;}
button.fix-btn{margin-top:10px;padding:8px 16px;background:#22c55e;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s;}
button.fix-btn:hover{background:#16a34a;}
.stat{font-size:2em;font-weight:700;margin-bottom:10px;}
.progress{background:#1e2937;border-radius:12px;height:20px;overflow:hidden;margin-top:20px;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--green),#86efac);border-radius:12px;transition:width 1.5s ease;}
@media(max-width:768px){.grid-2{grid-template-columns:1fr;}}
</style>
</head>
<body>

<nav>
  <div class="logo">ğŸ›¡ï¸ Scanner AI</div>
  <div>
    <button id="logoutBtn" onclick="window.location.href='index.html'">Ø®Ø±ÙˆØ¬</button>
    <button id="whatsappBtn" onclick="sendWhatsApp()">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</button>
  </div>
</nav>

<div class="grid grid-2">
  <div class="card">
    <h3>ğŸ§  ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
    <input type="file" id="fileInput" accept=".txt,.js,.html,.php,.py,.css" style="display:none;">
    <label for="fileInput" class="file-upload-btn">ğŸ“ Ø±ÙØ¹ Ù…Ù„Ù ÙƒÙˆØ¯</label>
    
    <!-- Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ -->
    <h4>Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ</h4>
    <textarea id="codeInput" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§..."></textarea>
    
    <!-- Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ -->
    <h4>Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­</h4>
    <!-- Ø¨Ø¹Ø¯ Ø²Ø± Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆÙ‚Ø¨Ù„ scanResult -->
    <div style="margin-top:15px;">
     <span style="font-weight:700;">Ø¹Ø¯Ø¯ Ø§Ù„Ø«ØºØ±Ø§Øª: <span id="vulnCount">0</span></span> |
      <span style="font-weight:700;">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…Ø§Ù†: <span id="secLevel">Low</span></span>
     </div>
    <textarea id="fixedCode" placeholder="Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§..." readonly style="background:#1e2937;color:#86efac;"></textarea>
    
    <button onclick="deepScanCode()" class="file-upload-btn" style="width:100%;margin-top:15px;">ğŸ” ÙØ­Øµ Ø¹Ù…ÙŠÙ‚</button>
    <button onclick="autoFixCode()" class="file-upload-btn" style="background:#22c55e;margin-top:10px;">ğŸ› ï¸ Ø¥ØµÙ„Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠ</button>
    
    <div class="progress"><div id="progressBar" class="progress-fill" style="width:0%"></div></div>
    <div id="scanResult"></div>
  </div>
</div>

<script>
const vulnerabilities=[
  {name:'XSS', regex:/innerHTML|document\.write/i, severity:'high', 
   desc:'Ù‡Ø¬ÙˆÙ… ÙŠØ³Ù…Ø­ Ø¨Ø­Ù‚Ù† Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø¶Ø§Ø±Ø© Ø¯Ø§Ø®Ù„ ØµÙØ­Ø§Øª Ø§Ù„ÙˆÙŠØ¨.', 
   fix:'Ø§Ø³ØªØ®Ø¯Ù… textContent Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† innerHTML ÙˆØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª.'},
  {name:'SQL Injection', regex:/SELECT.*FROM|INSERT.*INTO|UPDATE.*SET/i, severity:'high', 
   desc:'Ù‡Ø¬ÙˆÙ… ÙŠØ³Ù…Ø­ Ø¨ØªÙ†ÙÙŠØ° Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª SQL ØºÙŠØ± Ù…ØµØ±Ø­ Ø¨Ù‡Ø§.', 
   fix:'Ø§Ø³ØªØ®Ø¯Ù… Prepared Statements Ù…Ø¹ Ù…ØªØºÙŠØ±Ø§Øª parameters.'},
  {name:'Eval / Function Injection', regex:/eval\s*\(|Function\s*\(/i, severity:'high', 
   desc:'ØªØ´ØºÙŠÙ„ ÙƒÙˆØ¯ Ù†ØµÙŠ ØºÙŠØ± Ù…ÙˆØ«ÙˆÙ‚ Ù…Ù…Ø§ ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ø®Ø·Ø±.', 
   fix:'ØªØ¬Ù†Ø¨ eval ÙˆØ§Ø³ØªØ®Ø¯Ù… Ø¯ÙˆØ§Ù„ Ø¢Ù…Ù†Ø© Ù…Ø«Ù„ JSON.parse Ø£Ùˆ Ø¯ÙˆØ§Ù„ Ù…Ø­Ø¯Ø¯Ø©.'},
  {name:'CSRF Risk', regex:/csrf/i, severity:'medium', 
   desc:'Ù‡Ø¬ÙˆÙ… ÙŠØ±Ø³Ù„ Ø·Ù„Ø¨Ø§Øª Ù…Ø²ÙˆØ±Ø© Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….', 
   fix:'Ø§Ø³ØªØ®Ø¯Ù… CSRF tokens Ù„ÙƒÙ„ Ø·Ù„Ø¨ Ø­Ø³Ø§Ø³.'},
  {name:'Insecure Cookie', regex:/document\.cookie/i, severity:'medium', 
   desc:'Ø§Ù„ÙƒÙˆÙƒÙŠØ² Ù‚Ø¯ ØªÙƒÙˆÙ† Ù…Ø¹Ø±Ø¶Ø© Ù„Ù„Ø³Ø±Ù‚Ø© Ø¥Ø°Ø§ Ù„Ù… ØªØ­Ø¯Ø¯ HttpOnly Ùˆ Secure.', 
   fix:'Ø­Ø¯Ø¯ HttpOnly Ùˆ Secure Ùˆ SameSite Ù„Ù„ÙƒÙˆÙƒÙŠØ².'},
  {name:'LocalStorage Risk', regex:/localStorage\.setItem/i, severity:'low', 
   desc:'ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø© ÙÙŠ LocalStorage ØºÙŠØ± Ø¢Ù…Ù†.', 
   fix:'ØªØ¬Ù†Ø¨ ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø© ÙÙŠ LocalStorage Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… ØªØ´ÙÙŠØ±.'},
  {name:'Hardcoded Secret', regex:/api_key|password|secret/i, severity:'high', 
   desc:'ÙˆØ¬ÙˆØ¯ ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ø£Ùˆ Ù…ÙØ§ØªÙŠØ­ API Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯.', 
   fix:'Ø§Ø³ØªØ®Ø¯Ù… Ù…Ù„ÙØ§Øª Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ© Ø£Ùˆ environment variables.'},
  {name:'Open Redirect', regex:/window\.location|location\.href/i, severity:'medium', 
   desc:'Ø±ÙˆØ§Ø¨Ø· ØªØ­ÙˆÙŠÙ„ ØºÙŠØ± Ø¢Ù…Ù†Ø© ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØºÙ„Ø§Ù„Ù‡Ø§ Ù„Ù„ØªØµÙŠØ¯.', 
   fix:'ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙˆØ³Ù…Ø­ ÙÙ‚Ø· Ø¨Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø©.'}
];

document.getElementById('fileInput').addEventListener('change', e=>{
  const file=e.target.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=evt=>document.getElementById('codeInput').value=evt.target.result;
    reader.readAsText(file);
  }
});

function deepScanCode(){
  const code=document.getElementById('codeInput').value;
  let vulns=0;
  let results=[];
  vulnerabilities.forEach(v=>{
    if(v.regex.test(code)){
      vulns++;
      results.push(`<div class="vuln-item severity-${v.severity}">ğŸš¨ ${v.name}
      <div class="vuln-details"><strong>Ø´Ø±Ø­:</strong> ${v.desc}<br><strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­:</strong> ${v.fix}</div></div>`);
    }
  });
  if(!results.length) results.push('<div class="vuln-item severity-low">âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ Ø«ØºØ±Ø§Øª</div>');
  
  document.getElementById('vulnCount').textContent=vulns;
  document.getElementById('secLevel').textContent=vulns>3?'High':vulns>0?'Medium':'Low';
  document.getElementById('scanResult').innerHTML=results.join('');
  document.getElementById('progressBar').style.width=Math.min(100,vulns*12.5)+'%';
}

function autoFixCode(){
  let originalCode=document.getElementById('codeInput').value;
  let fixedCode=originalCode;

  vulnerabilities.forEach(v=>{
    if(v.regex.test(fixedCode)){
      if(v.name==='XSS') fixedCode=fixedCode.replace(/innerHTML|document\.write/g,'textContent');
      if(v.name==='Eval / Function Injection') fixedCode=fixedCode.replace(/eval\s*\(/g,'JSON.parse(');
      if(v.name==='SQL Injection') fixedCode=fixedCode.replace(/SELECT.*FROM|INSERT.*INTO|UPDATE.*SET/g,'/* Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…Ø¤Ù…Ù† */');
      if(v.name==='Insecure Cookie') fixedCode=fixedCode.replace(/document\.cookie/g,'/* ÙƒÙˆÙƒÙŠØ² Ø¢Ù…Ù†Ø© */');
      if(v.name==='LocalStorage Risk') fixedCode=fixedCode.replace(/localStorage\.setItem/g,'/* ØªØ®Ø²ÙŠÙ† Ù…Ø´ÙØ± */');
    }
  });

  document.getElementById('fixedCode').value=fixedCode;
  deepScanCode();
  alert('âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø«ØºØ±Ø§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©ØŒ ÙˆØ§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†!');
}

function sendWhatsApp(){
  const code=document.getElementById('codeInput').value||"Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ ÙƒÙˆØ¯ Ø¨Ø¹Ø¯";
  const message=encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø®ØµÙˆØµ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠ:\n\n${code}`);
  const phone='201098995624';
  window.open(`https://wa.me/${phone}?text=${message}`,'_blank');
}
</script>

</body>
</html>